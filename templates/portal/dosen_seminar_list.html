<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Seminar PKL yang Diuji - {{ dosen.nama }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container my-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <h2 class="mb-0">Seminar PKL</h2>
            <p class="text-muted mb-0">Jadwal tempat Anda terdaftar sebagai pembimbing atau penguji.</p>
        </div>
        <div>
            <a href="{% url 'portal:dosen_dashboard' %}"
               class="btn btn-outline-secondary btn-sm">
                &larr; Kembali ke Dashboard Dosen
            </a>
        </div>
    </div>

    {% if seminars %}
        <div class="card">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-striped table-hover mb-0">
                        <thead>
                        <tr>
                            <th>Tanggal / Waktu</th>
                            <th>Mahasiswa</th>
                            <th>Judul</th>
                            <th>Ruang</th>
                            <th>Pembimbing</th>
                            <th>Peran</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for s in seminars %}
                            <tr>
                                <td>{{ s.jadwal }}</td>  {# SESUAIKAN field jadwal #}
                                <td>{{ s.mahasiswa.nim }} - {{ s.mahasiswa.nama }}</td>
                                <td>{{ s.judul_laporan|truncatechars:60 }}</td> {# SESUAIKAN nama field judul #}
                                <td>{{ s.ruang }}</td>   {# SESUAIKAN field ruang #}
                                <td>{{ s.dosen_pembimbing.nama }}</td>
                                <td>
                                    {% if s.dosen_pembimbing_id == dosen.id %}
                                        Pembimbing
                                    {% elif s.dosen_penguji_id == dosen.id %}
                                        Penguji
                                    {% else %}

                                    {% endif %}
                                </td>
                                <td class="text-end">
                                    <a href="{% url 'portal:dosen_seminar_detail' s.pk %}"
                                         class="btn btn-sm btn-outline-secondary">
                                        Detail
                                    </a>
                                    {% if s.dosen_penguji_id == dosen.id %}
                                        <a href="{% url 'portal:dosen_seminar_penilaian' s.pk %}"
                                             class="btn btn-sm btn-primary">
                                            Isi Penilaian Penguji
                                        </a>
                                    {% endif %}
                                    {% if s.dosen_pembimbing_id == dosen.id %}
                                        <a href="{% url 'portal:dosen_pembimbing_penilaian' s.pk %}"
                                           class="btn btn-sm btn-success">
                                            Penilaian Pembimbing
                                        </a>
                                    {% endif %}
                                    <a href="{% url 'portal:seminar_penilaian_pdf' s.pk %}"
                                        class="btn btn-sm btn-outline-secondary" target="_blank">
                                        PDF
                                    </a>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    {% else %}
        <div class="alert alert-info">
            Belum ada jadwal seminar di mana Anda terdaftar sebagai dosen penguji.
        </div>
    {% endif %}
</div>
</body>
</html>
